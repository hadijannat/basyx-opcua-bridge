replicaCount: 1

image:
  repository: ghcr.io/hadijannat/basyx-opcua-bridge
  tag: "0.1.0"
  pullPolicy: IfNotPresent

serviceAccount:
  create: false
  name: ""

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/path: "/metrics"
  prometheus.io/port: "9090"

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
      - ALL

service:
  type: ClusterIP
  port: 9090
  annotations: {}

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}

bridge:
  args:
    - "--config"
    - "/app/config/bridge.yaml"
  configMountPath: /app/config/bridge.yaml

bridgeConfig:
  enabled: true
  existingConfigMap: ""
  data: |-
    opcua:
      endpoints:
        - url: opc.tcp://opcua-server:4840
          name: opcua
          security_policy: None
          security_mode: None
      connection_pool_size: 2
    mappings:
      - opcua_node_id: "ns=2;s=Temperature"
        aas_id_short: Temperature
        submodel_id: "urn:example:submodel:1"
        direction: bidirectional
        value_type: xs:double
    aas:
      type: basyx
      url: http://basyx-sm-repo:8080/submodels
      enable_events: true
      auto_create_submodels: true
      auto_create_elements: true
      events:
        enabled: true
        mqtt_url: mqtt://mosquitto:1883
        mqtt_topic: sm-repository/+/submodels/+/submodelElements/#
        payload_id_short_key: idShort
        payload_submodel_id_key: submodelId
        payload_value_key: value
        dedup_ttl_seconds: 2.0
        dedup_max_entries: 2048
    observability:
      metrics_enabled: true
      metrics_port: 9090
